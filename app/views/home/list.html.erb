<style>
.hide {
    display: none;
}
</style>
<div class="container page">
<div class="list text-left">
    <h1>관리하기</h1>
    <h5>셀러드와 함께 쉽고 편하게 모든 상품을 관리하세요</h5>
</div>

<table id="contents" class="table text-center">
  <thead class="thead">
    <tr>
      <th style="width: 10%"> </th>
      <th style="width: 15%">상품번호</th>
      <th style="width: 25%">상품명</th>
      <th style="width: 15%">브랜드</th>
      <th style="width: 15%">가격</th>
      <th style="width: 10%">재고수량</th>
      <th style="width: 10%"></th>
    </tr>
  </thead>
  <tbody>
  <% @product_array.each do |p|%>
    <tr class="main">
        <td><%= image_tag("11st_logo.png", height: "20em") %></td>
        <td><%= link_to p.prdNo, "http://www.11st.co.kr/product/SellerProductDetail.tmall?method=getSellerProductDetail&prdNo=#{p.prdNo}", class: "prdlink" %></td>
        <th scope="row"><%=p.prdNm%></th>
        <td><%=p.brand%></td>
        <td><%=p.selPrc%></td>
        <td><%=p.prdSelQty %></td>
        <td>
            <span class="off more">더보기</span>
            <span class="on more" style="display:none">접기</span>
        </td>
    </tr>
    <tr style="display:none" class="text-left">
        <td><strong>상세설명<strong></td>
        <td colspan="2" style="word-wrap: break-word;" class="text-left"><%= p.htmlDetail.html_safe %></td>
         <td></td>
        <td>
            <strong>택배사<br>배송비종류<br><br>상품 등록일</strong>
        </td>
        <td colspan="2">
                <% case p.dlvEtprsCd %>
                <% when '00034' %>
                    <% dlvEtp = 'CJ대한통운' %>
                <% when '00011' %>
                    <% dlvEtp = '한진택배' %>
                <% when '00012' %>
                    <% dlvEtp = '롯데(현대)택배' %>
                <% when '00001' %>
                    <% dlvEtp = '드림택배(KG 로지스)' %>
                <% when '00007' %>
                    <% dlvEtp = '우체국택배' %>
                <% when '00002' %>
                    <% dlvEtp = '로젠택배' %>
                <% when '00008' %>
                    <% dlvEtp = '우편등기' %>
                <% when '00021' %>
                    <% dlvEtp = '대신택배' %>
                <% when '00022' %>
                    <% dlvEtp = '일양로지스' %>
                <% when '00023' %>
                    <% dlvEtp = 'ACI' %>
                <% when '00025' %>
                    <% dlvEtp = 'WIZWA' %>
                <% when '00026' %>
                    <% dlvEtp = '경동택배' %>
                <% when '00027' %>
                    <% dlvEtp = '천일택배' %>
                <% when '00028' %>
                    <% dlvEtp = 'KGL(해외배송)' %>
                <% when '00031' %>
                    <% dlvEtp = 'OCS Korea' %>
                <% when '00033' %>
                    <% dlvEtp = 'GTX 택배' %>
                <% when '00035' %>
                    <% dlvEtp = '합동택배' %>
                <% when '00037' %>
                    <% dlvEtp = '건영택배' %>
                <% when '00099' %>
                    <% dlvEtp = '기타' %>
                <% end %>
            <%=dlvEtp %><br>
                <% if p.dlvCstInstBasiCd == '01' %>
                    <% dlvCst = '무료'%>
                <% elsif p.dlvCstInstBasiCd == '02'%>
                    <% dlvCst = '고정 배송비'%>
                <% elsif p.dlvCstInstBasiCd =='03'%>
                    <% dlvCst = '조건부 무료'%>
                <% end%>
            <%=dlvCst %><br><br>
            <%=p.created_at.strftime("%F")%>
        </td>
    </tr>
    <tr style="display:none">
        <td colspan="6"></td>
        <td><%= link_to 'Edit', edit_path(p.prdNo), style: 'color: #777777; font-weight: 300; font-size: 15px' %></td>
        <td><%= link_to 'Stop', stop_path(p.prdNo), style: 'color: #777777; font-weight: 300; font-size: 15px' %></td>
    </tr>
    <% end %>
  </tbody>
</table>
</div>

<script>
$(".more").on("click", function(){
    var obj = $(this);
    if(obj.hasClass("off")){
        obj.hide();
        obj.next().show();
        obj.parent().parent().next().show();
        obj.parent().parent().next().next().show();
    } else {
        obj.hide();
        obj.prev().show();
        obj.parent().parent().next().hide();
        obj.parent().parent().next().next().hide();
    }
})
</script>
